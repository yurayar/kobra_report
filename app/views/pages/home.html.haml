.container
  - @cars.each do |f|
    .card
      .car-image
        .car-number
          .flag
          %p= f.legal_num
        .car-location
          %p
            %i(class="fa fa-map-marker")
            = f.car_base
      .car-info
        %p(class="call-num")
          = f.call_num
        %h4= f.name
        %p
          %i(class="fa fa-tachometer")
          = "#{f.mileage} км"
      - if Report.find_by "created_at >= ? and car_id = #{f.id}", Time.zone.now.beginning_of_day
        .car-report-form
          %span(class="show-report")
            %i(class="fa fa-flag")
            = link_to 'Просмотреть', report_path(Report.find_by "created_at >= ? and car_id = #{f.id}", Time.zone.now.beginning_of_day)
      - else
        .car-report-form
          %span(class="show-form")
            %i(class="fa fa-pie-chart")
            Создать отчет
          = simple_form_for(@report) do |g|
            - if @report.errors.any?
              #error_explanation
                %h2= "#{pluralize(@report.errors.count, "error")} prohibited this report from being saved:"
                %ul
                  - @report.errors.full_messages.each do |msg|
                    %li= msg
            .field
              = g.hidden_field :officer_id, :value => @author.id
            .field
              = g.hidden_field :car_id, :value => f.id
            .field
              = g.date_field :report_date, as: :datepicker, :value => Date.today.strftime("%Y-%m-%d")
            .field
              = g.number_field :mileage_before, placeholder: "Пробег перед сменой"
            .field
              = g.number_field :mileage_after, placeholder: "Пробег после смены"
            .field
              = g.number_field :mileage_day, placeholder: "Пробег за смену"
            .field
              = g.number_field :mileage_board, placeholder: "Пробег по бортовому журналу"
            .field
              = g.number_field :mileage_day_gps, placeholder: "Пробег за смену GPS"
            .field
              = g.number_field :max_speed, placeholder: "Максимальная скорость"
            .field
              = g.number_field :fuel_spend, placeholder: "Потрачено топлива"
            .field
              = g.text_field :fuel_income, placeholder: "Заправлено топлива"
            .complect
              .field
                %p Видеорегистраторы:
                = g.number_field :videorecorder_exist_quantity
                %span из
                = g.number_field :videorecorder_quantity
              .field
                %p Бронежилеты:
                = g.number_field :armor_exist_quantity
                %span из
                = g.number_field :armor_quantity
              .field
                %p Каски:
                = g.number_field :helmet_exist_quantity
                %span из
                = g.number_field :helmet_quantity
              .field
                %p Планшет
                = g.input :tablet_exist, :as => :boolean
              .field
                %p Палки резиновые:
                = g.number_field :baton_exist
                %span из
                = g.number_field :baton_quantity
              .field
                %p Пистолеты:
                = g.number_field :pistol_exist
                %span из
                = g.number_field :pistol_quantity
              .field
                %p Автоматы:
                = g.number_field :machine_gun_exist
                %span из
                = g.number_field :machine_gun_quantity
              .field
                %p Наличие комплекта (огнетушитель, знак, аптечка)
                = g.input :car_kit, :as => :boolean
            .actions
              = g.submit 'Готово'